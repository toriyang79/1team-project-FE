{"openapi":"3.1.0","info":{"title":"Shorts API","description":"유튜브 숏폼 클론 - 동영상 업로드/재생","version":"0.2.0"},"paths":{"/api/videos/search":{"get":{"tags":["videos"],"summary":"Search Videos","description":"동영상 검색 - 문자열 포함 검색","operationId":"search_videos_api_videos_search_get","parameters":[{"name":"q","in":"query","required":true,"schema":{"type":"string","title":"Q"}},{"name":"skip","in":"query","required":false,"schema":{"type":"integer","default":0,"title":"Skip"}},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","default":20,"title":"Limit"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/videos/upload":{"post":{"tags":["videos"],"summary":"Upload Video","description":"동영상 업로드","operationId":"upload_video_api_videos_upload_post","requestBody":{"content":{"multipart/form-data":{"schema":{"$ref":"#/components/schemas/Body_upload_video_api_videos_upload_post"}}},"required":true},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Video"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/videos/":{"get":{"tags":["videos"],"summary":"Get Videos","description":"동영상 목록 조회","operationId":"get_videos_api_videos__get","parameters":[{"name":"skip","in":"query","required":false,"schema":{"type":"integer","default":0,"title":"Skip"}},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","default":20,"title":"Limit"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/VideoListResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/videos/{video_id}":{"get":{"tags":["videos"],"summary":"Get Video","description":"단일 동영상 정보 조회","operationId":"get_video_api_videos__video_id__get","parameters":[{"name":"video_id","in":"path","required":true,"schema":{"type":"integer","title":"Video Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Video"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["videos"],"summary":"Delete Video","description":"동영상 삭제","operationId":"delete_video_api_videos__video_id__delete","parameters":[{"name":"video_id","in":"path","required":true,"schema":{"type":"integer","title":"Video Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"put":{"tags":["videos"],"summary":"Update Video","description":"동영상 정보 수정\n- original_filename만 제공: 이름만 변경\n- file만 제공: 파일만 교체\n- 둘 다 제공: 파일 교체 + 이름 변경","operationId":"update_video_api_videos__video_id__put","parameters":[{"name":"video_id","in":"path","required":true,"schema":{"type":"integer","title":"Video Id"}}],"requestBody":{"content":{"multipart/form-data":{"schema":{"$ref":"#/components/schemas/Body_update_video_api_videos__video_id__put"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Video"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/videos/{video_id}/stream":{"get":{"tags":["videos"],"summary":"Stream Video","description":"동영상 스트리밍 (Range Request 지원)","operationId":"stream_video_api_videos__video_id__stream_get","parameters":[{"name":"video_id","in":"path","required":true,"schema":{"type":"integer","title":"Video Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/videos/{video_id}/download":{"get":{"tags":["videos"],"summary":"Download Video","description":"동영상 다운로드","operationId":"download_video_api_videos__video_id__download_get","parameters":[{"name":"video_id","in":"path","required":true,"schema":{"type":"integer","title":"Video Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/videos/{video_id}/like":{"post":{"tags":["likes"],"summary":"Toggle Like","description":"좋아요 토글\n- 좋아요 안 눌렀으면 → 좋아요\n- 이미 눌렀으면 → 좋아요 취소","operationId":"toggle_like_api_videos__video_id__like_post","parameters":[{"name":"video_id","in":"path","required":true,"schema":{"type":"integer","title":"Video Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LikeStatus"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"get":{"tags":["likes"],"summary":"Get Like Status","description":"좋아요 상태 조회\n- 좋아요 개수\n- 현재 사용자가 좋아요 눌렀는지","operationId":"get_like_status_api_videos__video_id__like_get","parameters":[{"name":"video_id","in":"path","required":true,"schema":{"type":"integer","title":"Video Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LikeStatus"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["likes"],"summary":"Unlike Video","description":"좋아요 취소 (명시적)","operationId":"unlike_video_api_videos__video_id__like_delete","parameters":[{"name":"video_id","in":"path","required":true,"schema":{"type":"integer","title":"Video Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/videos/{video_id}/comments":{"get":{"tags":["comments"],"summary":"Read Comments","description":"특정 영상(video_id)에 달린 모든 댓글을 조회합니다.","operationId":"read_comments_api_videos__video_id__comments_get","parameters":[{"name":"video_id","in":"path","required":true,"schema":{"type":"integer","title":"Video Id"}},{"name":"skip","in":"query","required":false,"schema":{"type":"integer","default":0,"title":"Skip"}},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","default":20,"title":"Limit"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CommentListResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"post":{"tags":["comments"],"summary":"Create Comment","description":"특정 영상에 새로운 댓글을 작성합니다.","operationId":"create_comment_api_videos__video_id__comments_post","parameters":[{"name":"video_id","in":"path","required":true,"schema":{"type":"integer","title":"Video Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CommentCreate"}}}},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CommentResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/videos/{video_id}/comments/{comment_id}":{"delete":{"tags":["comments"],"summary":"Delete Comments","description":"댓글 삭제","operationId":"delete_comments_api_videos__video_id__comments__comment_id__delete","parameters":[{"name":"video_id","in":"path","required":true,"schema":{"type":"integer","title":"Video Id"}},{"name":"comment_id","in":"path","required":true,"schema":{"type":"integer","title":"Comment Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"patch":{"tags":["comments"],"summary":"Update Comments","description":"댓글 수정","operationId":"update_comments_api_videos__video_id__comments__comment_id__patch","parameters":[{"name":"video_id","in":"path","required":true,"schema":{"type":"integer","title":"Video Id"}},{"name":"comment_id","in":"path","required":true,"schema":{"type":"integer","title":"Comment Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CommentUpdate"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CommentResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/":{"get":{"summary":"Root","operationId":"root__get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/health":{"get":{"summary":"Health Check","operationId":"health_check_health_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}}},"components":{"schemas":{"Body_update_video_api_videos__video_id__put":{"properties":{"file":{"type":"string","format":"binary","title":"File"},"original_filename":{"type":"string","title":"Original Filename"}},"type":"object","title":"Body_update_video_api_videos__video_id__put"},"Body_upload_video_api_videos_upload_post":{"properties":{"file":{"type":"string","format":"binary","title":"File"}},"type":"object","required":["file"],"title":"Body_upload_video_api_videos_upload_post"},"CommentCreate":{"properties":{"content":{"type":"string","maxLength":1000,"minLength":1,"title":"Content"}},"type":"object","required":["content"],"title":"CommentCreate"},"CommentListResponse":{"properties":{"total":{"type":"integer","title":"Total"},"comments":{"items":{"$ref":"#/components/schemas/CommentResponse"},"type":"array","title":"Comments"}},"type":"object","required":["total","comments"],"title":"CommentListResponse"},"CommentResponse":{"properties":{"content":{"type":"string","maxLength":1000,"minLength":1,"title":"Content"},"id":{"type":"integer","title":"Id"},"video_id":{"type":"integer","title":"Video Id"},"user_identifier":{"type":"string","title":"User Identifier"},"created_at":{"type":"string","format":"date-time","title":"Created At"}},"type":"object","required":["content","id","video_id","user_identifier","created_at"],"title":"CommentResponse"},"CommentUpdate":{"properties":{"content":{"type":"string","maxLength":1000,"minLength":1,"title":"Content"}},"type":"object","required":["content"],"title":"CommentUpdate"},"HTTPValidationError":{"properties":{"detail":{"items":{"$ref":"#/components/schemas/ValidationError"},"type":"array","title":"Detail"}},"type":"object","title":"HTTPValidationError"},"LikeStatus":{"properties":{"video_id":{"type":"integer","title":"Video Id"},"like_count":{"type":"integer","title":"Like Count"},"is_liked":{"type":"boolean","title":"Is Liked"}},"type":"object","required":["video_id","like_count","is_liked"],"title":"LikeStatus","description":"좋아요 상태 응답"},"ValidationError":{"properties":{"loc":{"items":{"anyOf":[{"type":"string"},{"type":"integer"}]},"type":"array","title":"Location"},"msg":{"type":"string","title":"Message"},"type":{"type":"string","title":"Error Type"}},"type":"object","required":["loc","msg","type"],"title":"ValidationError"},"Video":{"properties":{"filename":{"type":"string","title":"Filename"},"original_filename":{"type":"string","title":"Original Filename"},"file_path":{"type":"string","title":"File Path"},"file_size":{"type":"integer","title":"File Size"},"content_type":{"type":"string","title":"Content Type"},"uploaded_at":{"type":"string","format":"date-time","title":"Uploaded At"},"updated_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Updated At"},"id":{"type":"integer","title":"Id"}},"type":"object","required":["filename","original_filename","file_path","file_size","content_type","uploaded_at","id"],"title":"Video"},"VideoListResponse":{"properties":{"total":{"type":"integer","title":"Total"},"videos":{"items":{"$ref":"#/components/schemas/Video"},"type":"array","title":"Videos"}},"type":"object","required":["total","videos"],"title":"VideoListResponse"}}}}