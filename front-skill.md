# Frontend Quickstart & Playbook (React/Vite)

프로젝트를 새로 시작할 때 이 문서를 먼저 읽고, 각 단계 전에 사용자에게 진행 여부를 확인하세요. (예: “환경설정 진행할까요?” → 사용자 확인 후 진행)

## 1) 환경 준비
- Node.js 18+ 권장 (16 미만 비추천).
- 패키지 설치: `cd team_2_music_front && npm install`
- 환경 변수: `.env` 파일에 `VITE_API_BASE_URL`과 개발용 `VITE_DEV_USER_ID`(임시 인증 헤더) 설정.
  - 예:  
    ```env
    VITE_API_BASE_URL=http://localhost:8001/api
    VITE_DEV_USER_ID=1
    ```

## 2) 실행 & 빌드
- 개발 서버: `npm run dev` (기본 5173, 필요 시 `--host --port 5173`)
- 타입 체크: `npm run typecheck`
- 린트: `npm run lint` (필요 시 추가)
- 프로덕션 빌드: `npm run build`

## 3) 주요 기능 요약
- 업로드 페이지
  - 드래그앤드롭 + 파일 선택, 제목 자동 채움(파일명), AI 제공자/모델 필수 입력.
  - 오디오 업로드 시 FormData로 전송: `file`, `title`, `ai_provider`, `ai_model`, `description`, `genre`, `tags`, (선택) `cover_file`.
  - 업로드 성공 시 라이브러리로 이동, 실패 시 에러 문구 출력.
- 커버 이미지
  - 백엔드 `/tracks/{id}/cover` 엔드포인트 사용. 업로드 시 `cover_file` 포함하면 Explore/Library 카드와 플레이어에 노출.
- 플레이어
  - 글로벌 큐 지원, prev/next, 좋아요 토글, 공유(클립보드), 다운로드, 볼륨/음소거.
  - 모바일: 케밥 메뉴(점 3개)로 액션 노출, 볼륨 슬라이더는 항상 표시.
- 라이브러리/상세/탐색
  - Track 카드에 재생/좋아요/플레이·좋아요 카운트, duration 표시.
  - 상세 댓글 작성·표시(작성자 정보는 백엔드 user profile 연동 필요).
  - 탐색 검색 필터(제목/설명/장르/태그).

## 4) API 사용 규칙
- 모든 axios 요청 헤더에 개발용 임시 인증 헤더 추가: `X-User-Id: <VITE_DEV_USER_ID>` (prod에서는 실제 인증 연동 필요).
- 커버 이미지 표시: `coverUrl = VITE_API_BASE_URL + "/tracks/{id}/cover"` when `cover_url` exists.

## 5) 작업 순서 가이드 (각 단계 전 사용자 확인 필수)
1) **환경 구성**: Node 버전 확인 → `npm install` → `.env` 세팅. 진행 여부 사용자 확인.
2) **개발 서버 가동**: `npm run dev` 후 주요 페이지(홈/업로드/라이브러리/상세) 열기. 사용자에게 확인 후 진행.
3) **기능 개발/수정**: 요구사항 단위로 브랜치/커밋. UX 변경 시 화면 캡처 공유. 단계마다 사용자 확인.
4) **테스트**: `npm run typecheck` / `npm run build` 실행해 오류 없는지 확인. 필요 시 e2e/컴포넌트 테스트 설계. 사용자에게 테스트 실행 여부 확인.
5) **빌드/배포 안내**: Vercel 등 배포 시 `VITE_API_BASE_URL`을 HTTPS 백엔드 도메인으로 설정, CORS/HTTPS(클립보드) 유의. 사용자에게 빌드/배포 진행 여부 확인.

## 6) 확인 체크리스트
- [ ] `.env`에 `VITE_API_BASE_URL`, `VITE_DEV_USER_ID` 설정 완료.
- [ ] 업로드: 오디오·커버 업로드 후 라이브러리/탐색에서 커버와 재생 가능 여부.
- [ ] 플레이어: 재생/일시정지, prev/next, 좋아요, 공유, 다운로드, 볼륨/음소거 동작.
- [ ] 댓글: 작성/표시 동작(작성자 표시 필요 시 백엔드 profile 데이터 확인).
- [ ] 타입/빌드 오류 없음: `npm run typecheck && npm run build` 통과.

## 7) 추가 보완 아이디어
- 국제화/문구 중앙 관리(i18n), 소셜 공유 모달, 오류/빈 상태 UI 개선.
- 검색/필터 고도화(정렬, 장르/태그 칩).
- PWA/모바일 최적화(오프라인 큐, 미디어 세션 API).

---
이 문서를 읽은 뒤, 각 단계 전에 사용자에게 진행 여부를 묻고 확인을 받은 뒤 수행하세요. 필요 시 pip/테스트 등 백엔드 명령은 사용자에게 전달만 하고 실행은 사용자 측에서 진행하도록 안내합니다.



***
네, “이 기능 추가해줘 / 안 돼 / 다음 단계 진행”처럼 요청하시면 제가 바로 설계·구현 방향을 제안하고 코드까지 작성할 수 있습니다. 다만 정확도를 높이려면 아래를 알려주시면 더 빨리 처리됩니다:

기대 동작/변경점과 화면 위치(어떤 페이지/컴포넌트인지)
필요한 API 변화나 백엔드 스펙(엔드포인트, 필드)
재현 방법이나 현재 에러 메시지(버그일 경우)
요구만 주시면 단계별로 계획 → 구현 → 테스트 안내까지 진행하고, 큰 변경 전에는 확인을 꼭 받고 진행하겠습니다.
***