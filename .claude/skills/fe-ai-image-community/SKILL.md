---
name: fe-ai-image-community
description: |
  FastAPI 기반 AI 이미지 커뮤니티 서비스 FE 개발 가이드 스킬. 
  이 스킬은 팀 프로젝트의 일부로서 AI 이미지 공유/토너먼트 플랫폼을 구축할 때 사용합니다.
---

# 이미지/이미지 토너먼트 프론트엔드 개발 스킬

## 서비스 개요
이 스킬은 Artlion 서비스의 이미지 및 이미지 토너먼트 기능을 담당하는 프론트엔드 페이지를 개발합니다.

### 마이크로서비스 아키텍처
- **백엔드 구성**:
  - 회원가입/인증 백엔드 (EC2 배포) - JWT 토큰 발급 담당
  - **이미지/이미지 토너먼트 백엔드** (EC2 배포) - **이 스킬의 연동 대상**
  - 동영상 백엔드 (EC2 배포)
  - 오디오 백엔드 (EC2 배포)

- **프론트엔드 구성**:
  - 메인 페이지 + 회원가입 + 공통 영역 (네비바, 푸터) 담당자
  - **이미지/이미지 토너먼트 페이지 담당자** - **이 스킬의 담당 영역**
  - 동영상 페이지 담당자
  - 오디오 페이지 담당자
  - 최종적으로 하나의 EC2에 통합 배포 예정

### 백엔드 위치
- `C:\Users\a0103\workspaces\0000-1team-project`
- FastAPI 기반
- API Base URL: `/api/v1`

### 디자인 참고
- `C:\Users\a0103\workspaces\0000-1team-project-FE\stitch_artlion_main_page (3)`
- 다크 모드 지원
- Tailwind CSS 기반
- 주요 색상: primary (#eead2b), 반응형 디자인

### 공통 영역 (다른 담당자가 개발)
- **상단 네비게이션 바**: 로고, Explore, About 메뉴, 검색창, Upload/Log In 버튼
- **하단 푸터**: 로고, 소셜 링크, 정책 링크, 저작권 정보
- **인증 처리**: JWT 토큰 발급 및 관리 (다른 개발자 담당)

## 백엔드 API 목록

이 프론트엔드가 연동할 모든 API 엔드포인트입니다:

### 1. 이미지 API (`/api/v1/images`)

#### 이미지 업로드
- **POST** `/api/v1/images/`
- 인증 필요: ✅ (JWT)
- 요청: 파일 업로드 (multipart/form-data)
  - `file`: 이미지 파일 (최대 10MB, jpg/jpeg/png/gif/webp)
  - `prompt`: AI 생성 프롬프트 (필수, 1-2000자)
  - `model_name`: AI 모델명 (선택, 최대 100자)
  - `is_tournament_opt_in`: 토너먼트 참여 여부 (선택, 기본 false)
- 응답: 생성된 이미지 정보

#### 이미지 목록 조회
- **GET** `/api/v1/images/`
- 인증 필요: ❌
- 쿼리 파라미터:
  - `page`: 페이지 번호 (기본 1)
  - `size`: 페이지 크기 (기본 20, 최대 100)
  - `user_id`: 특정 사용자 필터 (선택)
  - `tournament_only`: 토너먼트 참여 이미지만 (선택)
- 응답: 페이지네이션된 이미지 목록

#### 이미지 상세 조회
- **GET** `/api/v1/images/{image_id}`
- 인증 필요: ❌
- 응답: 이미지 상세 정보 (좋아요 수 포함)

#### 이미지 수정
- **PUT** `/api/v1/images/{image_id}`
- 인증 필요: ✅ (자신의 이미지만)
- 요청 Body:
  - `prompt`: 수정할 프롬프트 (선택)
  - `model_name`: 수정할 모델명 (선택)
  - `is_tournament_opt_in`: 토너먼트 참여 여부 (선택)
- 응답: 수정된 이미지 정보

#### 이미지 삭제
- **DELETE** `/api/v1/images/{image_id}`
- 인증 필요: ✅ (자신의 이미지만)
- 응답: 204 No Content (Soft Delete)

#### 랜덤 피드
- **GET** `/api/v1/images/feed/random`
- 인증 필요: ❌
- 쿼리 파라미터:
  - `limit`: 조회 개수 (기본 20, 최대 50)
- 응답: 랜덤 이미지 목록

#### 인기 Top 이미지 (24시간)
- **GET** `/api/v1/images/feed/top-24h`
- 인증 필요: ❌
- 쿼리 파라미터:
  - `limit`: 조회 개수 (기본 10, 최대 50)
- 응답: 최근 24시간 인기 이미지

### 2. 좋아요 API (`/api/v1/images/{image_id}/like`)

#### 좋아요 추가
- **POST** `/api/v1/images/{image_id}/like`
- 인증 필요: ✅
- 응답: 좋아요 상태 및 개수

#### 좋아요 취소
- **DELETE** `/api/v1/images/{image_id}/like`
- 인증 필요: ✅
- 응답: 좋아요 상태 및 개수

#### 좋아요 상태 조회
- **GET** `/api/v1/images/{image_id}/like/status`
- 인증 필요: ✅
- 응답: 사용자의 좋아요 여부 및 총 개수

### 3. 토너먼트 API (`/api/v1/tournaments`)

#### 토너먼트 랜덤 매칭
- **GET** `/api/v1/tournaments/match`
- 인증 필요: ❌
- 응답: 랜덤 이미지 2개 매칭
- 조건: `is_tournament_opt_in=true` 이미지만 선택

#### 토너먼트 투표
- **POST** `/api/v1/tournaments/vote`
- 인증 필요: ✅
- 요청 Body:
  - `winner_image_id`: 승자 이미지 ID
  - `loser_image_id`: 패자 이미지 ID
- 응답: 투표 결과 및 승자의 새로운 승리 횟수

#### 토너먼트 랭킹
- **GET** `/api/v1/tournaments/rankings`
- 인증 필요: ❌
- 쿼리 파라미터:
  - `limit`: 조회 개수 (기본 50, 최대 100)
- 응답: 승리 횟수 기준 랭킹 목록

### 인증 방식
- **JWT 토큰**: 다른 개발자가 만든 인증 백엔드에서 발급
- **Header**: `Authorization: Bearer {토큰}`
- 토큰에서 추출 정보: `user_id`, `username` 등

## 개발 프로세스

### 1단계: 요구사항 수집
클로드 코드는 먼저 다음 항목에 대해 질문을 통해 요구사항을 수집합니다:

#### 기본 설정
- 사용할 프레임워크 (React, Vue, Next.js 등)
- 상태 관리 라이브러리 (Redux, Zustand, Context API 등)
- 스타일링 방법 (Tailwind CSS 권장)
- API 통신 라이브러리 (axios, fetch 등)
- 라우팅 방식 (React Router, Next.js App Router 등)

#### UI/UX 선호도
- 페이지네이션 vs 무한 스크롤
- 이미지 그리드 컬럼 수 (모바일/태블릿/데스크톱)
- 애니메이션 효과 사용 여부
- 로딩 상태 표시 방식

#### 추가 기능
- 이미지 검색 기능 (프론트엔드 필터링)
- 이미지 공유 기능
- 댓글 기능 (백엔드 API 없음, 향후 확장 고려 시)
- 다크모드 토글

### 2단계: 프로젝트 설정
- 프로젝트 초기 설정 제안
- 필요한 패키지 설치 명령어 제공
- 폴더 구조 설계 제안
- **실제 설치 및 설정은 사용자가 수행**

### 3단계: 페이지 개발 (단계별 진행)
백엔드 API와 연동되는 페이지를 순차적으로 개발하며, 각 단계마다 테스트 후 진행합니다.

#### 3-1. 공통 컴포넌트 개발
- **ImageCard 컴포넌트**: 이미지 썸네일 카드
- **LikeButton 컴포넌트**: 좋아요 버튼 (하트 아이콘, 개수 표시)
- **LoadingSpinner 컴포넌트**: 로딩 상태 표시
- **Modal 컴포넌트**: 이미지 상세보기용 모달
- **Button 컴포넌트**: 공통 버튼 스타일
- **테스트**: 각 컴포넌트 렌더링 확인
- **사용자 승인 후 다음 단계 진행**

#### 3-2. 이미지 목록 페이지 (`/images`)
- **연동 API**: `GET /api/v1/images/`
- **기능**:
  - 이미지 그리드 레이아웃 (ImageCard 사용)
  - 페이지네이션 (page, size 파라미터)
  - 필터: 토너먼트 참여 이미지만 보기
  - 로딩 상태 표시
- **테스트**:
  - API 호출하여 이미지 목록 표시 확인
  - 페이지네이션 동작 확인
  - 필터 동작 확인
- **사용자 승인 후 다음 단계 진행**

#### 3-3. 이미지 상세 페이지 (`/images/:id`)
- **연동 API**:
  - `GET /api/v1/images/{image_id}` (상세 정보)
  - `POST /api/v1/images/{image_id}/like` (좋아요)
  - `DELETE /api/v1/images/{image_id}/like` (좋아요 취소)
  - `GET /api/v1/images/{image_id}/like/status` (좋아요 상태)
- **기능**:
  - 이미지 확대 보기
  - 프롬프트, 모델명, 생성일 표시
  - 좋아요 버튼 (로그인 필요)
  - 작성자 정보 표시
  - 자신의 이미지면 수정/삭제 버튼
- **테스트**:
  - 이미지 상세 정보 표시 확인
  - 좋아요 추가/취소 동작 확인
  - 인증 상태에 따른 버튼 표시 확인
- **사용자 승인 후 다음 단계 진행**

#### 3-4. 이미지 업로드 페이지 (`/upload`)
- **연동 API**: `POST /api/v1/images/`
- **기능**:
  - 이미지 파일 선택 (드래그 앤 드롭 지원)
  - 이미지 미리보기
  - 프롬프트 입력 (필수, 1-2000자)
  - AI 모델명 입력 (선택)
  - 토너먼트 참여 여부 체크박스
  - 업로드 진행 상태 표시
- **테스트**:
  - 파일 선택 및 미리보기 확인
  - API 호출하여 업로드 성공 확인
  - 에러 처리 (파일 크기, 형식 검증)
  - 업로드 후 목록 페이지로 이동
- **사용자 승인 후 다음 단계 진행**

#### 3-5. 랜덤 피드 페이지 (`/feed/random`)
- **연동 API**: `GET /api/v1/images/feed/random`
- **기능**:
  - 랜덤 이미지 그리드 표시
  - 새로고침 버튼
  - 좋아요 기능 통합
- **테스트**:
  - 랜덤 이미지 표시 확인
  - 새로고침 시 다른 이미지 로드 확인
- **사용자 승인 후 다음 단계 진행**

#### 3-6. 인기 이미지 페이지 (`/feed/top`)
- **연동 API**: `GET /api/v1/images/feed/top-24h`
- **기능**:
  - 최근 24시간 인기 이미지 표시
  - 좋아요 순 정렬
  - 좋아요 개수 강조 표시
- **테스트**:
  - 인기 이미지 순서대로 표시 확인
  - 좋아요 개수 표시 확인
- **사용자 승인 후 다음 단계 진행**

#### 3-7. 토너먼트 참여 페이지 (`/tournament/battle`)
- **연동 API**:
  - `GET /api/v1/tournaments/match` (매칭)
  - `POST /api/v1/tournaments/vote` (투표)
- **기능**:
  - 2개 이미지 좌우 배치
  - 클릭하여 투표
  - 투표 후 다음 매칭 자동 로드
  - 투표 애니메이션
  - 연속 투표 횟수 표시
- **테스트**:
  - 랜덤 매칭 확인
  - 투표 후 API 호출 확인
  - 다음 매칭 자동 로드 확인
  - 로그인 필요 동작 확인
- **사용자 승인 후 다음 단계 진행**

#### 3-8. 토너먼트 랭킹 페이지 (`/tournament/rankings`)
- **연동 API**: `GET /api/v1/tournaments/rankings`
- **기능**:
  - 순위별 이미지 표시
  - 순위, 승리 횟수 표시
  - 1~3위 강조 표시
  - 자신의 이미지 하이라이트
- **테스트**:
  - 랭킹 목록 표시 확인
  - 승리 횟수 순 정렬 확인
  - 순위 표시 확인
- **사용자 승인 후 다음 단계 진행**

### 4단계: API 연동 레이어 구축
각 단계의 페이지 개발과 함께 진행되지만, 별도로 API 호출 함수를 관리합니다.

#### API 클라이언트 설정
- Axios 또는 Fetch 기반 클라이언트 생성
- Base URL 설정
- JWT 토큰 자동 포함 (Interceptor)
- 공통 에러 핸들링

#### API 함수 작성
- `imageAPI.js`: 이미지 관련 API 함수
  - `getImages(page, size, filters)`
  - `getImageById(id)`
  - `uploadImage(formData)`
  - `updateImage(id, data)`
  - `deleteImage(id)`
  - `getRandomFeed(limit)`
  - `getTopImages(limit)`
- `likeAPI.js`: 좋아요 관련 API 함수
  - `addLike(imageId)`
  - `removeLike(imageId)`
  - `getLikeStatus(imageId)`
- `tournamentAPI.js`: 토너먼트 관련 API 함수
  - `getMatch()`
  - `vote(winnerImageId, loserImageId)`
  - `getRankings(limit)`

#### 에러 핸들링
- 401 에러: 로그인 페이지로 리다이렉트
- 403 에러: 권한 없음 메시지 표시
- 404 에러: 존재하지 않는 리소스 처리
- 500 에러: 서버 오류 메시지 표시

**테스트**: 각 API 함수 호출 및 응답 확인 (사용자가 수행)

### 5단계: 인증 상태 관리
JWT 토큰은 다른 개발자가 만든 인증 백엔드에서 발급받아 사용합니다.

#### 인증 상태 저장
- LocalStorage 또는 SessionStorage에 JWT 토큰 저장
- 토큰 디코딩하여 사용자 정보 추출 (`user_id`, `username`)
- 전역 상태로 로그인 여부 관리

#### Protected 페이지 처리
- 로그인 필요 페이지:
  - 이미지 업로드 (`/upload`)
  - 토너먼트 투표 (`/tournament/battle`)
  - 좋아요 기능
- 로그인하지 않은 경우 로그인 페이지로 리다이렉트

**테스트**: 로그인 상태에 따른 페이지 접근 확인 (사용자가 수행)

### 6단계: 라우팅 설정
모든 페이지 경로를 설정합니다.

#### 라우트 목록
- `/images` - 이미지 목록
- `/images/:id` - 이미지 상세
- `/upload` - 이미지 업로드 (인증 필요)
- `/feed/random` - 랜덤 피드
- `/feed/top` - 인기 이미지
- `/tournament/battle` - 토너먼트 참여 (인증 필요)
- `/tournament/rankings` - 토너먼트 랭킹

**테스트**: 각 페이지 접근 및 네비게이션 확인 (사용자가 수행)

### 7단계: 반응형 디자인
참고 디자인(Artlion)처럼 모바일/태블릿/데스크톱 대응

#### 브레이크포인트 (Tailwind CSS 기준)
- 모바일: `< 640px`
- 태블릿: `640px ~ 1024px`
- 데스크톱: `> 1024px`

#### 그리드 레이아웃
- 모바일: 1~2 컬럼
- 태블릿: 3~4 컬럼
- 데스크톱: 4~5 컬럼

**테스트**: 다양한 화면 크기에서 레이아웃 확인 (사용자가 수행)

### 8단계: 최적화 및 마무리
- 이미지 레이지 로딩 (Lazy Loading)
- 코드 스플리팅 (Dynamic Import)
- 불필요한 리렌더링 방지 (React.memo, useMemo 등)
- 로딩 스켈레톤 UI 추가

**테스트**: 성능 측정 및 최종 확인 (사용자가 수행)

## 테스트 방식

### 클로드 코드의 역할
각 단계마다 다음과 같은 테스트 방식을 **제안**합니다:

1. **컴포넌트 렌더링 테스트**
   ```bash
   npm run dev
   # 브라우저에서 http://localhost:3000 접속하여 확인
   ```

2. **API 연동 테스트**
   ```bash
   # 네트워크 탭에서 API 호출 확인
   # 응답 데이터 확인
   ```

3. **기능 테스트**
   - 클릭 동작 확인
   - 폼 제출 확인
   - 데이터 로딩 확인

4. **반응형 테스트**
   - 브라우저 개발자 도구 반응형 모드로 확인
   - 모바일, 태블릿, 데스크톱 뷰 테스트

### 사용자의 역할
- **실제 테스트 수행**: 클로드 코드가 제안한 테스트 방법대로 직접 확인
- **결과 보고**: 테스트 결과를 클로드 코드에게 알림
- **승인**: 문제없으면 다음 단계 진행 승인
- **피드백**: 문제 발견 시 수정 요청

## 작업 진행 원칙

1. **단계별 진행**: 한 단계씩 완료하고 승인 후 다음 단계로
2. **자동 실행 금지**: 터미널 명령어는 제안만 하고 사용자가 실행
3. **테스트 중심**: 각 기능 완성 시 반드시 테스트
4. **사용자 승인 필수**: 테스트 완료 후 사용자 승인 없이 다음 단계로 진행하지 않음
5. **명확한 커뮤니케이션**: 작업 내용과 테스트 방법을 쉽게 설명

## 페이지별 요약

### 필수 개발 페이지 (총 8개)
1. **이미지 목록 페이지** (`/images`) - 인증 불필요
2. **이미지 상세 페이지** (`/images/:id`) - 인증 불필요 (좋아요는 인증 필요)
3. **이미지 업로드 페이지** (`/upload`) - 인증 필요 ✅
4. **랜덤 피드 페이지** (`/feed/random`) - 인증 불필요
5. **인기 이미지 페이지** (`/feed/top`) - 인증 불필요
6. **토너먼트 참여 페이지** (`/tournament/battle`) - 인증 필요 ✅
7. **토너먼트 랭킹 페이지** (`/tournament/rankings`) - 인증 불필요
8. **공통 컴포넌트** (ImageCard, LikeButton, Modal 등)

### 연동해야 할 API (총 13개)
#### 이미지 관련 (8개)
1. POST `/api/v1/images/` - 업로드
2. GET `/api/v1/images/` - 목록
3. GET `/api/v1/images/{id}` - 상세
4. PUT `/api/v1/images/{id}` - 수정
5. DELETE `/api/v1/images/{id}` - 삭제
6. GET `/api/v1/images/feed/random` - 랜덤
7. GET `/api/v1/images/feed/top-24h` - 인기

#### 좋아요 관련 (3개)
8. POST `/api/v1/images/{id}/like` - 추가
9. DELETE `/api/v1/images/{id}/like` - 취소
10. GET `/api/v1/images/{id}/like/status` - 상태

#### 토너먼트 관련 (3개)
11. GET `/api/v1/tournaments/match` - 매칭
12. POST `/api/v1/tournaments/vote` - 투표
13. GET `/api/v1/tournaments/rankings` - 랭킹

## 참고사항
- **코딩 초보자를 위한 쉬운 설명**: 각 단계마다 충분한 설명 제공
- **에러 발생 시 해결 방법 안내**: 자세한 디버깅 가이드
- **모든 커뮤니케이션은 한국어로 진행**
- **실제 터미널 작업은 사용자가 수행**: 클로드는 명령어만 제안
- **각 단계 완료 시 사용자 승인 필수**: 승인 없이 다음 단계로 진행하지 않음
